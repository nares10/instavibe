{% extends 'instavibeapp/base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<div class="container text-black mx-auto mt-12 mb-12 p-8 bg-white rounded-lg shadow-xl max-w-2xl">
    <h2 class="text-3xl text-black font-semibold text-center text-gray-800 mb-8">Edit Profile</h2>

    <form method="POST" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        {# Profile Image Section - Fixed size #}
        <div class="flex flex-col items-center mb-6">
            <label for="image" class="text-lg font-medium text-gray-700 mb-4">Profile Image</label>
            {% if profile.image %}
                <img src="{{ profile.image.url }}" alt="Current Profile Image" 
                     class="w-20 h-20 rounded-full object-cover border-2 border-gray-200 shadow-md mb-4" width="150">
            {% endif %}
            <div class="relative inline-block w-full max-w-xs">
                
                <input type="file" name="image" id="image" accept="image/*"
                       class="ring-2 ring-blue-500 focus:ring-blue-500 focus:ring-opacity-50 
                                  file:mr-4 file:py-2 file:px-4 file:border-0 
                                  file:text-sm file:font-semibold file:bg-blue-100 
                                  file:text-blue-700 hover:file:bg-blue-200 
                                  rounded-lg cursor-pointer text-black">
            </div>
        </div>


        {# Bio Field - Fixed #}
        <div class="form-group text-black">
            <label for="bio" class="block  text-sm font-medium text-gray-700 mb-2">Bio</label>
            <textarea name="bio" id="bio" rows="4"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">{{ profile.bio }}</textarea>
        </div>

        {# Date of Birth Field - Fixed #}
        <div class="form-group text-black">
            <label for="date_of_birth" class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
            <input type="date" name="date_of_birth" id="date_of_birth"
                   value="{{ profile.date_of_birth|date:'Y-m-d' }}"
                   class="w-full px-4 py-2 bg-blue-200 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        {# Gender Field - Fixed #}
        <div class="form-group">
            <label for="gender" class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
            <select name="gender" id="gender"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="">Select Gender</option>
                <option value="Male" {% if profile.gender == "Male" %}selected{% endif %}>Male</option>
                <option value="Female" {% if profile.gender == "Female" %}selected{% endif %}>Female</option>
                <option value="Other" {% if profile.gender == "Other" %}selected{% endif %}>Other</option>
                <option value="Prefer not to say" {% if profile.gender == "Prefer not to say" %}selected{% endif %}>Prefer not to say</option>
            </select>
        </div>

        {# Buttons Section #}
        <div class="flex justify-center gap-4 pt-4">
            <button type="submit" 
                    class="bg-green-600 text-white py-2 px-6 rounded-lg text-base font-semibold 
                           hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 
                           focus:ring-opacity-50 transition duration-200">
                Save Changes
            </button>
            <a href="{% url 'instavibeapp:profile' username=request.user.username %}" 
               class="bg-gray-500 text-white py-2 px-6 rounded-lg text-base font-semibold 
                      hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 
                      focus:ring-opacity-50 transition duration-200">
                Cancel
            </a>
        </div>
    </form>
</div>

<script>
    document.getElementById('image').addEventListener('change', function() {
        const fileName = this.files[0]?.name || 'No file chosen';
        document.getElementById('fileName').textContent = fileName;
    });
</script>
{% endblock %}

